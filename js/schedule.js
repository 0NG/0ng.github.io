!function(){const e={orderBy:"startTime",showLocation:!1,offsetMax:72,offsetMin:4,showDeleted:!1,singleEvents:!0,maxResults:250};Object.assign(e,CONFIG.calendar);const t=new Date,n=new Date,s=new Date;n.setHours(t.getHours()+e.offsetMax),s.setHours(t.getHours()-e.offsetMin);const a={key:e.api_key,orderBy:e.orderBy,timeMax:n.toISOString(),timeMin:s.toISOString(),showDeleted:e.showDeleted,singleEvents:e.singleEvents,maxResults:e.maxResults},o=new URL(`https://www.googleapis.com/calendar/v3/calendars/${e.calendar_id}/events`);function i(){const n=document.querySelector(".event-list");n&&fetch(o.href).then((e=>e.json())).then((s=>{if(0===s.items.length)return void(n.innerHTML="<hr>");n.innerHTML="";let a=0;const o=6e4*(new Date).getTimezoneOffset();s.items.forEach((s=>{const i=new Date(s.start.dateTime||new Date(s.start.date).getTime()+o),r=new Date(s.end.dateTime||new Date(s.end.date).getTime()+o);let c="now";r<t?c="past":i>t&&(c="future"),"future"===c&&a<t&&(n.innerHTML+="<hr>"),n.innerHTML+=function(n,s,a,o){const i={weekday:"short",hour:"2-digit",minute:"2-digit"},r="now"===n?"NOW":function(e,t){const n=36e5,s=864e5,a=2592e6,o=31536e6;let i=e-t;const r=i>0?" ago":" later";return i=Math.abs(i),i<n?Math.round(i/6e4)+" minutes"+r:i<s?Math.round(i/n)+" hours"+r:i<a?"about "+Math.round(i/s)+" days"+r:i<o?"about "+Math.round(i/a)+" months"+r:"about "+Math.round(i/o)+" years"+r}(t,a),c=a.toLocaleTimeString([],i)+" - "+o.toLocaleTimeString([],i);let l="";e.showLocation&&s.location&&(l=`<span class="event-location event-details">${s.location}</span>`);let d="";return s.description&&(d=`<span class="event-description event-details">${s.description}</span>`),`<section class="event event-${n}">\n        <h2 class="event-summary">\n          ${s.summary}\n          <span class="event-relative-time">${r}</span>\n        </h2>\n        ${l}\n        <span class="event-duration event-details">${c}</span>\n        ${d}\n      </section>`}(c,s,i,r),a=r}))}))}Object.entries(a).forEach((e=>o.searchParams.append(...e))),i();const r=setInterval(i,6e4);document.addEventListener("pjax:send",(()=>{clearInterval(r)}))}();